<Page x:Class="ClinicManagementSystem.Pages.SettingsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      FlowDirection="RightToLeft"
      Title="Settings">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Border Grid.Row="0" Background="White" CornerRadius="10" Padding="20" Margin="0,0,0,15">
                <StackPanel>
                    <TextBlock Text="⚙️ الإعدادات" FontSize="24" FontWeight="Bold" Foreground="#333"/>
                    <TextBlock Text="إعدادات النظام والعيادة" FontSize="14" Foreground="#666" Margin="0,5,0,0"/>
                </StackPanel>
            </Border>

            <!-- Settings Content -->
            <StackPanel Grid.Row="1">
                <!-- Clinic Info -->
                <Border Background="White" CornerRadius="10" Padding="25" Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="🏥 معلومات العيادة" FontSize="18" FontWeight="Bold" 
                                   Foreground="#333" Margin="0,0,0,20"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                <TextBlock Text="اسم العيادة *" FontSize="14" Foreground="#555" Margin="0,0,0,5"/>
                                <TextBox x:Name="txtClinicName" Text="عيادة الشفاء" FontSize="14" Padding="10" Margin="0,0,0,15"/>

                                <TextBlock Text="رقم الهاتف" FontSize="14" Foreground="#555" Margin="0,0,0,5"/>
                                <TextBox x:Name="txtClinicPhone" Text="0123456789" FontSize="14" Padding="10" Margin="0,0,0,15"/>

                                <TextBlock Text="البريد الإلكتروني" FontSize="14" Foreground="#555" Margin="0,0,0,5"/>
                                <TextBox x:Name="txtClinicEmail" FontSize="14" Padding="10"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                <TextBlock Text="العنوان" FontSize="14" Foreground="#555" Margin="0,0,0,5"/>
                                <TextBox x:Name="txtClinicAddress" Text="القاهرة، مصر" FontSize="14" 
                                         Padding="10" Height="80" TextWrapping="Wrap" AcceptsReturn="True" 
                                         VerticalScrollBarVisibility="Auto"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Fees Settings -->
                <Border Background="White" CornerRadius="10" Padding="25" Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="💰 إعدادات الأسعار" FontSize="18" FontWeight="Bold" 
                                   Foreground="#333" Margin="0,0,0,20"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                <TextBlock Text="سعر الكشف" FontSize="14" Foreground="#555" Margin="0,0,0,5"/>
                                <TextBox x:Name="txtExaminationFee" Text="200" FontSize="14" Padding="10"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1" Margin="10,0">
                                <TextBlock Text="سعر الإعادة" FontSize="14" Foreground="#555" Margin="0,0,0,5"/>
                                <TextBox x:Name="txtReexaminationFee" Text="100" FontSize="14" Padding="10"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2" Margin="10,0,0,0">
                                <TextBlock Text="العملة" FontSize="14" Foreground="#555" Margin="0,0,0,5"/>
                                <TextBox x:Name="txtCurrency" Text="جنيه" FontSize="14" Padding="10"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Working Hours -->
                <Border Background="White" CornerRadius="10" Padding="25" Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="🕐 ساعات العمل" FontSize="18" FontWeight="Bold" 
                                   Foreground="#333" Margin="0,0,0,20"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                <TextBlock Text="بداية العمل" FontSize="14" Foreground="#555" Margin="0,0,0,5"/>
                                <TextBox x:Name="txtWorkStartTime" Text="09:00" FontSize="14" Padding="10"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                <TextBlock Text="نهاية العمل" FontSize="14" Foreground="#555" Margin="0,0,0,5"/>
                                <TextBox x:Name="txtWorkEndTime" Text="18:00" FontSize="14" Padding="10"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Backup Settings -->
                <Border Background="White" CornerRadius="10" Padding="25" Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="💾 النسخ الاحتياطي" FontSize="18" FontWeight="Bold" 
                                   Foreground="#333" Margin="0,0,0,20"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="مسار النسخ الاحتياطي" FontSize="14" Foreground="#555" Margin="0,0,0,5"/>
                                <TextBox x:Name="txtBackupPath" IsReadOnly="True" FontSize="14" Padding="10" 
                                         Background="#F5F5F5"/>

                                <CheckBox x:Name="chkAutoBackup" Content="نسخ احتياطي تلقائي يومياً" 
                                          Margin="0,15,0,0" FontSize="14"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1" Margin="15,0,0,0" VerticalAlignment="Top">
                                <Button Content="📁 تصفح" Background="#2196F3" Foreground="White" 
                                        BorderThickness="0" Padding="20,10" FontSize="14" Margin="0,20,0,10" 
                                        Cursor="Hand" Click="BrowseBackupPath_Click"/>

                                <Button Content="💾 نسخ احتياطي الآن" Background="#4CAF50" Foreground="White" 
                                        BorderThickness="0" Padding="15,10" FontSize="14" 
                                        Cursor="Hand" Click="BackupNow_Click"/>

                                <Button Content="♻️ استعادة" Background="#FF9800" Foreground="White" 
                                        BorderThickness="0" Padding="15,10" FontSize="14" Margin="0,10,0,0" 
                                        Cursor="Hand" Click="Restore_Click"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- System Settings -->
                <Border Background="White" CornerRadius="10" Padding="25" Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="🔧 إعدادات النظام" FontSize="18" FontWeight="Bold" 
                                   Foreground="#333" Margin="0,0,0,20"/>

                        <CheckBox x:Name="chkShowNotifications" Content="إظهار الإشعارات" 
                                  IsChecked="True" Margin="0,10" FontSize="14"/>

                        <CheckBox x:Name="chkAutoQueue" Content="إضافة تلقائية للدور عند تسجيل زيارة" 
                                  IsChecked="True" Margin="0,10" FontSize="14"/>

                        <CheckBox x:Name="chkPrintAfterInvoice" Content="طباعة الفاتورة تلقائياً بعد الحفظ" 
                                  Margin="0,10" FontSize="14"/>

                        <Separator Margin="0,20"/>

                        <TextBlock Text="حجم الخط" FontSize="14" Foreground="#555" Margin="0,10,0,5"/>
                        <ComboBox x:Name="cmbFontSize" FontSize="14" Padding="10">
                            <ComboBoxItem Content="صغير (12)"/>
                            <ComboBoxItem Content="متوسط (14)" IsSelected="True"/>
                            <ComboBoxItem Content="كبير (16)"/>
                            <ComboBoxItem Content="كبير جداً (18)"/>
                        </ComboBox>
                    </StackPanel>
                </Border>

                <!-- About -->
                <Border Background="White" CornerRadius="10" Padding="25" Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="ℹ️ عن البرنامج" FontSize="18" FontWeight="Bold" 
                                   Foreground="#333" Margin="0,0,0,20"/>

                        <TextBlock Text="نظام إدارة العيادات المتكامل" FontSize="16" 
                                   FontWeight="Bold" Margin="0,5"/>
                        <TextBlock Text="الإصدار: 1.0.0" FontSize="14" Foreground="#666" Margin="0,5"/>
                        <TextBlock Text="تاريخ الإصدار: 2025" FontSize="14" Foreground="#666" Margin="0,5"/>
                        <TextBlock Text="صُنع بـ ❤️ في مصر" FontSize="14" Foreground="#666" Margin="0,15"/>

                        <Button Content="🔄 التحقق من التحديثات" Background="#9C27B0" Foreground="White" 
                                BorderThickness="0" Padding="15,10" FontSize="14" Margin="0,10,0,0" 
                                HorizontalAlignment="Left" Cursor="Hand" Click="CheckUpdates_Click"/>
                    </StackPanel>
                </Border>

                <!-- Save Button -->
                <Border Background="White" CornerRadius="10" Padding="25">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <Button Content="✅ حفظ الإعدادات" Background="#4CAF50" Foreground="White" 
                                BorderThickness="0" Padding="40,15" FontSize="16" FontWeight="Bold" 
                                Margin="10,0" Cursor="Hand" Click="SaveSettings_Click"/>

                        <Button Content="🔄 استعادة الافتراضية" Background="#FF9800" Foreground="White" 
                                BorderThickness="0" Padding="30,15" FontSize="16" FontWeight="Bold" 
                                Margin="10,0" Cursor="Hand" Click="ResetDefaults_Click"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Grid>
    </ScrollViewer>
</Page>